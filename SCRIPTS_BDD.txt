-- SCRIPTS CREATION DES TABLES
-- version 1 => a valider avec la toute la team  

-- comment

--Bahaa

CREATE TABLE T_MENU(
ID_MENU NUMBER(10) NOT NULL,
NOM VARCHAR(50) NOT NULL,
PRIX DECIMAL(10) NOT NULL,
TYPE_MENU VARCHAR(20) NOT NULL,
ENTREE VARCHAR(50) NOT NULL,
PLAT VARCHAR(50) NOT NULL,
DESSERT VARCHAR(50) NOT NULL,
PRIMARY KEY (ID_MENU)
);


CREATE TABLE T_PLAGE(
JOUR DATE NOT NULL,
TIME_DEBUT TIME,
TIME_FIN TIME,
REDUCTION DECIMAL(4),
NB_PLACE_DISPO INT,
PRIMARY KEY (JOUR,TIME_DEBUT)
);


CREATE TABLE T_RESTAURANT(
ID_RESTAURANT NUMBER(10) NOT NULL,
NOM VARCHAR(50),
ADRESSE VARCHAR(100),
VILLE VARCHAR(50),
NUM_PHONE VARCHAR(20),
EMAIL_VARCHAR(50),
NB_PLACE_MAX INT,
PRIMARY KEY(ID_RESTAURANT)
);

CREATE TABLE T_RESTAURANT_MENU(
ID_RESTAURANT NUMBER(10) NOT NULL,
ID_MENU NUMBER(10) NOT NULL,
FOREIGN KEY (ID_RESTAURANT) references T_RESTAURANT(ID_RESTAURANT),
FOREIGN KEY (ID_MENU) references ID_MENU(ID_MENU)
);

CREATE TABLE T_ANNONCE(
ID_ANNONCE NUMBER(10) NOT NULL,
NUM_PHONE VARCHAR(20),
EMAIL VARCHAR(50),
ID_RESTAURANT NUMBER(10) NOT NULL,
PRIMARY KEY (ID_ANNONCE),
FOREIGN KEY ID_RESTAURANT references T_RESTAURANT(ID_RESTAURANT)
);

CREATE TABLE T_ANNONCE_PLAGE(
JOUR DATE NOT NULL,
TIME_DEBUT TIME NOT NULL,
ID_ANNONCE NUMBER(10) NOT NULL,
FOREIGN KEY (ID_ANNONCE) REFERENCES T_ANNONCE(ID_ANNONCE),
FOREIGN KEY (JOUR,TIME_DEBUT) REFERENCES T_PLAGE(JOUR,TIME_DEBUT));

CREATE TABLE T_USER(
NOM VARCHAR(50) NOT NULL,
PRENOM VARCHAR(50) NOT NULL,
MAIL VARCHAR(50) NOT NULL,
PASSWORD VARCHAR(50) NOT NULL,
TELEPHONE VARCHAR(20) NOT NULL,
PROFIL INT,
-- 0 CLIENT , 1 RESTAURATEUR
PRIMARY KEY (MAIL)
);

CREATE TABLE T_ANNONCE_USER(
MAIL VARCHAR(50) NOT NULL,
ID_ANNONCE NUMBER(10) NOT NULL,
FOREIGN KEY (ID_ANNONCE) REFERENCES T_ANNONCE(ID_ANNONCE),
FOREIGN KEY (MAIL) REFERENCES T_USER(MAIL)
);




CREATE TABLE T_RESERVATION(
  ID_RESERVATION NUMBER(10) NOT NULL,
  ID_ANNONCE NUMBER(10) NOT NULL,
  PRIMARY KEY (ID_RESERVATION),
  FOREIGN KEY (ID_ANNONCE) REFERENCES T_ANNONCE(ID_ANNONCE)
  );


CREATE TABLE T_USER_RESERVATION(
MAIL VARCHAR(50) NOT NULL,
ID_RES NUMBER(10) NOT NULL,
FOREIGN KEY (ID_RES) REFERENCES T_RESERVATION(ID_RESERVATION),
FOREIGN KEY (MAIL) REFERENCES T_USER(MAIL)


);





COMMIT;
